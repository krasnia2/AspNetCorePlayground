2020/03/27 20:38:39 cbauth: key: fts/remoteClients registered for tls config updates
2020-03-27T20:38:39.177+00:00 [INFO] main: /opt/couchbase/bin/cbft started (v0.6.0/5.5.0)
2020-03-27T20:38:39.177+00:00 [INFO] main: file descriptor limit current: 1048576 max: 1048576
2020-03-27T20:38:39.177+00:00 [INFO]   -authType="cbauth"
2020-03-27T20:38:39.178+00:00 [INFO]   -bindGrpc="127.0.0.1:9130,0.0.0.0:9130"
2020-03-27T20:38:39.178+00:00 [INFO]   -bindGrpcSsl="127.0.0.1:19130,0.0.0.0:19130"
2020-03-27T20:38:39.178+00:00 [INFO]   -bindHttp="127.0.0.1:8094,0.0.0.0:8094"
2020-03-27T20:38:39.178+00:00 [INFO]   -bindHttps=":18094"
2020-03-27T20:38:39.178+00:00 [INFO]   -cfgConnect="metakv"
2020-03-27T20:38:39.178+00:00 [INFO]   -container=""
2020-03-27T20:38:39.178+00:00 [INFO]   -dataDir="/opt/couchbase/var/lib/couchbase/data/@fts"
2020-03-27T20:38:39.179+00:00 [INFO]   -extras="127.0.0.1:8091"
2020-03-27T20:38:39.180+00:00 [INFO]   -help="false"
2020-03-27T20:38:39.181+00:00 [INFO]   -options="startCheckServer=skip,slowQueryLogTimeout=5s,defaultMaxPartitionsPerPIndex=171,bleveMaxResultWindow=10000,failoverAssignAllPrimaries=false,hideUI=true,cbaudit=true,ipv6=false,ftsMemoryQuota=262144000,maxReplicasAllowed=3,bucketTypesAllowed=membase:ephemeral,http2=true,vbuckets=1024"
2020-03-27T20:38:39.194+00:00 [INFO]   -register="wanted"
2020-03-27T20:38:39.195+00:00 [INFO]   -server="http://127.0.0.1:8091"
2020-03-27T20:38:39.196+00:00 [INFO]   -staticDir="static"
2020-03-27T20:38:39.197+00:00 [INFO]   -staticETag=""
2020-03-27T20:38:39.197+00:00 [INFO]   -tags="feed,janitor,pindex,queryer,cbauth_service"
2020-03-27T20:38:39.197+00:00 [INFO]   -tlsCertFile="/opt/couchbase/var/lib/couchbase/config/memcached-cert.pem"
2020-03-27T20:38:39.198+00:00 [INFO]   -tlsKeyFile="/opt/couchbase/var/lib/couchbase/config/memcached-key.pem"
2020-03-27T20:38:39.198+00:00 [INFO]   -uuid="60a6bc3db77e6c7b91c556140dcfec71"
2020-03-27T20:38:39.198+00:00 [INFO]   -version="false"
2020-03-27T20:38:39.198+00:00 [INFO]   -weight="1"
2020-03-27T20:38:39.198+00:00 [INFO]   GOMAXPROCS=2
2020-03-27T20:38:39.198+00:00 [INFO] main: registered bleve stores
2020-03-27T20:38:39.198+00:00 [INFO]   gtreap
2020-03-27T20:38:39.198+00:00 [INFO]   boltdb
2020-03-27T20:38:39.198+00:00 [INFO]   metrics
2020-03-27T20:38:39.198+00:00 [INFO]   goleveldb
2020-03-27T20:38:39.198+00:00 [INFO]   moss
2020-03-27T20:38:39.200+00:00 [INFO] main: curr dir: "/opt/couchbase/var/lib/couchbase"
2020-03-27T20:38:39.200+00:00 [INFO] main: data dir: "/opt/couchbase/var/lib/couchbase/data/@fts"
2020-03-27T20:38:39.230+00:00 [INFO] app_herder: memQuota: 262144000, appQuota: 262144000, indexQuota: 196608000, queryQuota: 235929600
2020-03-27T20:38:39.232+00:00 [INFO] manager: setting the nodeDefs implVersion to 5.5.0
2020-03-27T20:38:39.232+00:00 [INFO] cfg_metakv: Set, key: nodeDefs-known, cas: 1, split: true, nodeUUID: 60a6bc3db77e6c7b91c556140dcfec71
2020-03-27T20:38:39.232+00:00 [INFO] cfg_metakv: Set split, key: nodeDefs-known, added: map[60a6bc3db77e6c7b91c556140dcfec71:true], removed: map[], updated: map[]
2020-03-27T20:38:39.232+00:00 [INFO] cfg_metakv: Set split, key: nodeDefs-known, childPath: /fts/cbgt/cfg/nodeDefs-known/60a6bc3db77e6c7b91c556140dcfec71
2020-03-27T20:38:39.230+00:00 [INFO] cbauth: received  security change notification, code: 3
2020-03-27T20:38:39.237+00:00 [INFO] cfg_metakv: metaKVCallback, path: /fts/cbgt/cfg/nodeDefs-known/60a6bc3db77e6c7b91c556140dcfec71, key: nodeDefs-known/60a6bc3db77e6c7b91c556140dcfec71, deletion: false
2020-03-27T20:38:39.245+00:00 [INFO] manager: setting the nodeDefs implVersion to 5.5.0
2020-03-27T20:38:39.245+00:00 [INFO] cfg_metakv: Set, key: nodeDefs-wanted, cas: 3, split: true, nodeUUID: 60a6bc3db77e6c7b91c556140dcfec71
2020-03-27T20:38:39.245+00:00 [INFO] cfg_metakv: Set split, key: nodeDefs-wanted, added: map[60a6bc3db77e6c7b91c556140dcfec71:true], removed: map[], updated: map[]
2020-03-27T20:38:39.245+00:00 [INFO] cfg_metakv: Set split, key: nodeDefs-wanted, childPath: /fts/cbgt/cfg/nodeDefs-wanted/60a6bc3db77e6c7b91c556140dcfec71
2020-03-27T20:38:39.247+00:00 [INFO] cfg_metakv: metaKVCallback, path: /fts/cbgt/cfg/nodeDefs-wanted/60a6bc3db77e6c7b91c556140dcfec71, key: nodeDefs-wanted/60a6bc3db77e6c7b91c556140dcfec71, deletion: false
2020-03-27T20:38:39.248+00:00 [INFO] manager: loading dataDir...
2020-03-27T20:38:39.255+00:00 [INFO] manager: loading dataDir... done
2020-03-27T20:38:39.265+00:00 [INFO] main: custom jsoniter json implementation enabled
2020-03-27T20:38:39.265+00:00 [INFO] janitor: awakes, op: kick, msg: start
2020-03-27T20:38:39.278+00:00 [INFO] cbauth: notifying configs change for key: fts/remoteClients
2020-03-27T20:38:39.280+00:00 [INFO] Using plain authentication for user <ud>@fts</ud> 
2020-03-27T20:38:39.280+00:00 [INFO] Using plain authentication for user <ud>@fts</ud> 
2020-03-27T20:38:39.281+00:00 [INFO] Using plain authentication for user <ud>@fts</ud> 
2020-03-27T20:38:39.276+00:00 [WARN] janitor: JanitorOnce, err: janitor: skipped on nil planPIndexes -- cbgt.(*Manager).JanitorLoop() at manager_janitor.go:97
2020-03-27T20:38:39.281+00:00 [INFO] Using plain authentication for user <ud>@fts</ud> 
2020-03-27T20:38:39.282+00:00 [INFO] Using plain authentication for user <ud>@fts</ud> 
2020-03-27T20:38:39.282+00:00 [INFO] audit: created new audit service
2020-03-27T20:38:39.282+00:00 [INFO] cbauth: key: fts/grpc-ssl registered for tls config updates
2020-03-27T20:38:39.282+00:00 [INFO] init_grpc: GrpcServer Started at 0.0.0.0:9130
2020-03-27T20:38:39.298+00:00 [INFO] init_grpc: GrpcServer Started at 0.0.0.0:19130
2020-03-27T20:38:39.309+00:00 [INFO] main: ctl starting, dryRun: false, waitForMemberNodes: 30, verbose: 3, maxConcurrentPartitionMovesPerNode: 1
2020-03-27T20:38:39.314+00:00 [INFO] ctl: kickIndexDefs, kind: init
2020-03-27T20:38:39.316+00:00 [INFO] planner: nodesRemove: []string(nil)
2020-03-27T20:38:39.316+00:00 [INFO] planner: step planner
2020-03-27T20:38:39.317+00:00 [INFO] cfg_metakv: metaKVCallback, path: /fts/cbgt/cfg/nodeDefs-wanted/60a6bc3db77e6c7b91c556140dcfec71, key: nodeDefs-wanted/60a6bc3db77e6c7b91c556140dcfec71, deletion: false
2020-03-27T20:38:39.318+00:00 [INFO] cfg_metakv: Set, key: version, cas: 1, split: false, nodeUUID: 60a6bc3db77e6c7b91c556140dcfec71
2020-03-27T20:38:39.318+00:00 [INFO] cfg_metakv: Set path: /fts/cbgt/cfg/version
2020-03-27T20:38:39.319+00:00 [INFO] cfg_metakv: metaKVCallback, path: /fts/cbgt/cfg/version, key: version, deletion: false
2020-03-27T20:38:39.320+00:00 [INFO] version: CheckVersion, Cfg version updated 5.5.0
2020-03-27T20:38:39.320+00:00 [INFO] cfg_metakv: metaKVCallback, path: /fts/cbgt/cfg/nodeDefs-known/60a6bc3db77e6c7b91c556140dcfec71, key: nodeDefs-known/60a6bc3db77e6c7b91c556140dcfec71, deletion: false
2020-03-27T20:38:39.320+00:00 [INFO] janitor: awakes, op: kick, msg: cfg changed, key: nodeDefs-wanted
2020-03-27T20:38:39.320+00:00 [INFO] ctl: kickIndexDefs, kind: cfgEvent
2020-03-27T20:38:39.323+00:00 [INFO] cbauth: key: fts/https registered for tls config updates
2020-03-27T20:38:39.323+00:00 [INFO] main: ------------------------------------------------------
2020-03-27T20:38:39.323+00:00 [INFO] init_http: web UI / REST API is available (via 0.0.0.0): http://127.0.0.1:8094
2020-03-27T20:38:39.323+00:00 [INFO] main: ------------------------------------------------------
2020-03-27T20:38:39.323+00:00 [INFO] main: ------------------------------------------------------
2020-03-27T20:38:39.323+00:00 [INFO] init_http: web UI / REST API is available: https://:18094
2020-03-27T20:38:39.323+00:00 [INFO] main: ------------------------------------------------------
2020-03-27T20:38:39.324+00:00 [INFO] main: cbauth_service registering...
2020-03-27T20:38:39.324+00:00 [INFO] main: ------------------------------------------------------
2020-03-27T20:38:39.324+00:00 [INFO] init_http: web UI / REST API is available: http://0.0.0.0:8094
2020-03-27T20:38:39.324+00:00 [INFO] main: ------------------------------------------------------
2020-03-27T20:38:39.324+00:00 [INFO] init_http: Setting up a http limit listener over "0.0.0.0:8094"
2020-03-27T20:38:39.327+00:00 [INFO] init_http: Setting up a https limit listener over ":18094"
2020-03-27T20:38:39.332+00:00 [INFO] ctl/manager: GetTaskList, haveTasksRev: , changed, rv: &{Rev:[48] Tasks:[]}
2020-03-27T20:38:39.332+00:00 [WARN] janitor: JanitorOnce, err: janitor: skipped on nil planPIndexes -- cbgt.(*Manager).JanitorLoop() at manager_janitor.go:97
2020-03-27T20:38:39.336+00:00 [INFO] ctl/manager: GetCurrentTopology, haveTopologyRev: , changed, rv: &{Rev:[50] Nodes:[60a6bc3db77e6c7b91c556140dcfec71] IsBalanced:true Messages:[]}
2020-03-27T20:38:39.346+00:00 [INFO] ctl: run, kind: nodeDefs-wanted, updated memberNodes: {60a6bc3db77e6c7b91c556140dcfec71;}
2020-03-27T20:38:42.544+00:00 [INFO] ctl/manager: GetNodeInfo
2020-03-27T20:38:42.545+00:00 [INFO] ctl/manager: PrepareTopologyChange, change: {4b198d258b028d7d7f888873d4226a0b [] topology-change-rebalance [{{60a6bc3db77e6c7b91c556140dcfec71 0 <nil>} recovery-full}] []}
2020-03-27T20:38:42.547+00:00 [INFO] ctl/manager: PrepareTopologyChange, done
2020-03-27T20:38:42.547+00:00 [INFO] ctl/manager: GetTaskList, haveTasksRev: 0, changed, rv: &{Rev:[50] Tasks:[{Rev:[49] ID:prepare:4b198d258b028d7d7f888873d4226a0b Type:task-prepared Status:task-running IsCancelable:true Progress:100 DetailedProgress:map[] Description:prepare topology change ErrorMessage: Extra:map[topologyChange:{ID:4b198d258b028d7d7f888873d4226a0b CurrentTopologyRev:[] Type:topology-change-rebalance KeepNodes:[{NodeInfo:{NodeID:60a6bc3db77e6c7b91c556140dcfec71 Priority:0 Opaque:<nil>} RecoveryType:recovery-full}] EjectNodes:[]}]}]}
2020-03-27T20:38:42.549+00:00 [INFO] ctl/manager: StartTopologyChange, change: {4b198d258b028d7d7f888873d4226a0b [] topology-change-rebalance [{{60a6bc3db77e6c7b91c556140dcfec71 0 <nil>} recovery-full}] []}
2020-03-27T20:38:42.549+00:00 [INFO] ctl: waitForWantedNodes, wantedNodes: [60a6bc3db77e6c7b91c556140dcfec71]
2020-03-27T20:38:42.551+00:00 [INFO] ctl: getMovingPartitionsCount: 0
2020-03-27T20:38:42.551+00:00 [INFO] ctl/manager: StartTopologyChange, started
2020-03-27T20:38:42.551+00:00 [INFO] ctl/manager: GetTaskList, haveTasksRev: 2, changed, rv: &{Rev:[52] Tasks:[{Rev:[51] ID:rebalance:4b198d258b028d7d7f888873d4226a0b Type:task-rebalance Status:task-running IsCancelable:true Progress:0 DetailedProgress:map[] Description:topology change ErrorMessage: Extra:map[topologyChange:{ID:4b198d258b028d7d7f888873d4226a0b CurrentTopologyRev:[] Type:topology-change-rebalance KeepNodes:[{NodeInfo:{NodeID:60a6bc3db77e6c7b91c556140dcfec71 Priority:0 Opaque:<nil>} RecoveryType:recovery-full}] EjectNodes:[]}]}]}
2020-03-27T20:38:42.555+00:00 [INFO] ctl: waitForWantedNodes, wantedNodes: [60a6bc3db77e6c7b91c556140dcfec71]
2020-03-27T20:38:42.556+00:00 [INFO] ctl: waitForWantedNodes, nodesToRemove: []
2020-03-27T20:38:42.557+00:00 [INFO] planner: nodesRemove: []string{}
2020-03-27T20:38:42.557+00:00 [INFO] planner: step unregister
2020-03-27T20:38:42.557+00:00 [INFO] planner: step planner
2020-03-27T20:38:42.587+00:00 [INFO] ctl/manager: GetTaskList, haveTasksRev: 4, changed, rv: &{Rev:[53] Tasks:[]}
2020-03-27T20:43:39.494+00:00 [INFO] managerStats: {"feeds":{},"pindexes":{},"manager":{"TotKick":0,"TotSetOptions":0,"TotRegisterFeed":0,"TotUnregisterFeed":0,"TotRegisterPIndex":0,"TotUnregisterPIndex":0,"TotSaveNodeDef":2,"TotSaveNodeDefNil":0,"TotSaveNodeDefGetErr":0,"TotSaveNodeDefSetErr":0,"TotSaveNodeDefRetry":0,"TotSaveNodeDefSame":0,"TotSaveNodeDefOk":2,"TotCreateIndex":0,"TotCreateIndexOk":0,"TotDeleteIndex":0,"TotDeleteIndexOk":0,"TotIndexControl":0,"TotIndexControlOk":0,"TotDeleteIndexBySource":0,"TotDeleteIndexBySourceErr":0,"TotDeleteIndexBySourceOk":0,"TotPlannerOpStart":0,"TotPlannerOpRes":0,"TotPlannerOpErr":0,"TotPlannerOpDone":0,"TotPlannerNOOP":0,"TotPlannerNOOPOk":0,"TotPlannerKick":0,"TotPlannerKickStart":0,"TotPlannerKickChanged":0,"TotPlannerKickErr":0,"TotPlannerKickOk":0,"TotPlannerUnknownErr":0,"TotPlannerSubscriptionEvent":0,"TotPlannerStop":0,"TotJanitorOpStart":2,"TotJanitorOpRes":2,"TotJanitorOpErr":2,"TotJanitorOpDone":2,"TotJanitorNOOP":0,"TotJanitorNOOPOk":0,"TotJanitorKick":2,"TotJanitorKickStart":2,"TotJanitorKickErr":2,"TotJanitorKickOk":0,"TotJanitorClosePIndex":0,"TotJanitorRemovePIndex":0,"TotJanitorRestartPIndex":0,"TotJanitorLoadDataDir":0,"TotJanitorUnknownErr":0,"TotJanitorSubscriptionEvent":1,"TotJanitorStop":0,"TotRefreshLastNodeDefs":2,"TotRefreshLastIndexDefs":4,"TotRefreshLastPlanPIndexes":0}}
2020-03-27T20:43:39.494+00:00 [INFO] stats: {
    "batch_bytes_added": 0,
    "batch_bytes_removed": 0,
    "curr_batches_blocked_by_herder": 0,
    "num_bytes_used_ram": 71825656,
    "pct_cpu_gc": 0.00005214874206661764,
    "tot_batches_flushed_on_maxops": 0,
    "tot_batches_flushed_on_timer": 0,
    "tot_bleve_dest_closed": 0,
    "tot_bleve_dest_opened": 0,
    "tot_grpc_listeners_closed": 0,
    "tot_grpc_listeners_opened": 1,
    "tot_grpc_queryreject_on_memquota": 0,
    "tot_grpcs_listeners_closed": 0,
    "tot_grpcs_listeners_opened": 1,
    "tot_http_limitlisteners_closed": 0,
    "tot_http_limitlisteners_opened": 1,
    "tot_https_limitlisteners_closed": 0,
    "tot_https_limitlisteners_opened": 1,
    "tot_queryreject_on_memquota": 0,
    "tot_remote_grpc": 0,
    "tot_remote_grpc_tls": 0,
    "tot_remote_http": 0,
    "tot_remote_http2": 0,
    "total_gc": 4,
    "total_queries_rejected_by_herder": 0
}
2020-03-27T20:48:39.495+00:00 [INFO] managerStats: {"feeds":{},"pindexes":{},"manager":{"TotKick":0,"TotSetOptions":0,"TotRegisterFeed":0,"TotUnregisterFeed":0,"TotRegisterPIndex":0,"TotUnregisterPIndex":0,"TotSaveNodeDef":2,"TotSaveNodeDefNil":0,"TotSaveNodeDefGetErr":0,"TotSaveNodeDefSetErr":0,"TotSaveNodeDefRetry":0,"TotSaveNodeDefSame":0,"TotSaveNodeDefOk":2,"TotCreateIndex":0,"TotCreateIndexOk":0,"TotDeleteIndex":0,"TotDeleteIndexOk":0,"TotIndexControl":0,"TotIndexControlOk":0,"TotDeleteIndexBySource":0,"TotDeleteIndexBySourceErr":0,"TotDeleteIndexBySourceOk":0,"TotPlannerOpStart":0,"TotPlannerOpRes":0,"TotPlannerOpErr":0,"TotPlannerOpDone":0,"TotPlannerNOOP":0,"TotPlannerNOOPOk":0,"TotPlannerKick":0,"TotPlannerKickStart":0,"TotPlannerKickChanged":0,"TotPlannerKickErr":0,"TotPlannerKickOk":0,"TotPlannerUnknownErr":0,"TotPlannerSubscriptionEvent":0,"TotPlannerStop":0,"TotJanitorOpStart":2,"TotJanitorOpRes":2,"TotJanitorOpErr":2,"TotJanitorOpDone":2,"TotJanitorNOOP":0,"TotJanitorNOOPOk":0,"TotJanitorKick":2,"TotJanitorKickStart":2,"TotJanitorKickErr":2,"TotJanitorKickOk":0,"TotJanitorClosePIndex":0,"TotJanitorRemovePIndex":0,"TotJanitorRestartPIndex":0,"TotJanitorLoadDataDir":0,"TotJanitorUnknownErr":0,"TotJanitorSubscriptionEvent":1,"TotJanitorStop":0,"TotRefreshLastNodeDefs":2,"TotRefreshLastIndexDefs":5,"TotRefreshLastPlanPIndexes":0}}
2020-03-27T20:48:39.495+00:00 [INFO] stats: {
    "batch_bytes_added": 0,
    "batch_bytes_removed": 0,
    "curr_batches_blocked_by_herder": 0,
    "num_bytes_used_ram": 71825656,
    "pct_cpu_gc": 0.000024666258736895028,
    "tot_batches_flushed_on_maxops": 0,
    "tot_batches_flushed_on_timer": 0,
    "tot_bleve_dest_closed": 0,
    "tot_bleve_dest_opened": 0,
    "tot_grpc_listeners_closed": 0,
    "tot_grpc_listeners_opened": 1,
    "tot_grpc_queryreject_on_memquota": 0,
    "tot_grpcs_listeners_closed": 0,
    "tot_grpcs_listeners_opened": 1,
    "tot_http_limitlisteners_closed": 0,
    "tot_http_limitlisteners_opened": 1,
    "tot_https_limitlisteners_closed": 0,
    "tot_https_limitlisteners_opened": 1,
    "tot_queryreject_on_memquota": 0,
    "tot_remote_grpc": 0,
    "tot_remote_grpc_tls": 0,
    "tot_remote_http": 0,
    "tot_remote_http2": 0,
    "total_gc": 7,
    "total_queries_rejected_by_herder": 0
}
